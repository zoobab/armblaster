#################################################################
#
#################################################################


#################################################################
# ビルドターゲット名　(main.hex)
TARG    = main

#################################################################
# デバイス名.
DEVICE  = 24FJ64GA002

#################################################################
# Ｃ３０コンパイラのインストール先（ディレクトリ名に漢字や空白文字は禁止です）
C30     = D:/browser/c30



CC		= pic30-gcc
OBJDUMP	= pic30-objdump
BIN2HEX	= pic30-bin2hex
CFLAGS	= -mcpu=$(DEVICE) -Os 
LDFLAGS	= -Wl,--script=$(C30)/support/PIC24F/gld/p$(DEVICE).gld,--defsym=__MPLAB_BUILD=1,--defsym=__MPLAB_DEBUG=1,--heap=128


#################################################################
# 作成モジュールのリスト.
OBJS = main.o

#################################################################
# デフォルトターゲット.
all:	$(TARG).hex

#################################################################
# HEXファイル ターゲット.
$(TARG).hex :	 $(OBJS)
	$(CC) $(LDFLAGS) $(OBJS) -o $(TARG).cof
	$(OBJDUMP) -S $(TARG).cof > $(TARG).lst
	$(BIN2HEX) $(TARG).cof

#################################################################
# .c --> .o に変換する規則.
.c.o:
	$(CC) $(CFLAGS) -o $@ -c $<

#################################################################



#################################################################
# 
clean:
	-rm -f *.o $(TARG).cof $(TARG).lst

#################################################################
